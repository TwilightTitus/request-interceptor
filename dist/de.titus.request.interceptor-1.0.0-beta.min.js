!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";const o={urlHandleMap:{},doIntercept:function(t,e,n){let o=this.urlHandleMap[t.server],r=typeof o;return"undefined"===r?n():"function"===r?o(t,e,n):"object"===r?o.doHandle(t,e,n):void 0},addInterceptor:function(t,e){if(arguments.length<2)throw new Error("function required a url and an interceptor");let n=arguments[arguments.length-1];for(let t=0;t<arguments.length-1;t++)this.urlHandleMap[arguments[t]]=n},removeInterceptor:function(t){delete this.urlHandleMap[t]}};e.a=o},function(t,e,n){"use strict";e.a={URLSPLITTER:/^((([^:\/]*:)?\/\/)?([^:\/]*)(\:([0-9]*))?)(\/.*)?$/}},function(t,e,n){"use strict";var o=function(t){this.rawToken=t;let e=t.split(".");if(3!=e.length)throw new Error('No valid json web token! - "'+t+'"');this.header=JSON.parse(atob(e[0])),this.body=JSON.parse(atob(e[1])),this.signature=e[2]};const r=function(t){this.setup=t,this.setup.refresh=this.setup.refresh||{interval:"always"},this.jwt,this.useFetch="function"==typeof window.fetch};r.DEFAULT={MIN_REFRESH_INTERVALL_TIME:6e5},r.prototype.doHandle=function(t,e,n){let o=e instanceof XMLHttpRequest,i=r.prototype[o?"appendJwtXHR":"appendJwt"].bind(this,e,n);return this.jwt&&"always"!==this.setup.refresh.interval?i(this.jwt):this.__loadToken(i)},r.prototype.__loadToken=function(t){return this.useFetch?this.__loadTokenFetch(t):this.__loadTokenByXHR(t)},r.prototype.__loadTokenFetch=function(t){return fetch(this.setup.login.url,{method:this.setup.login.method||"get"}).then(function(t){return t.json()}).then(r.prototype.__extractToken.bind(this)).then(t||function(){})},r.prototype.__loadTokenByXHR=function(t){let e=new XMLHttpRequest,n=r.prototype.__extractToken.bind(this);return e.onreadystatechange=function(){4==e.readyState&&(n(JSON.parse(this.response)),t&&t(this.jwt))},e.open(this.setup.login.method||"get",this.setup.login.url,!this.setup.login.sync),e.send()},r.prototype.__extractToken=function(t){if(this.jwt=new o(t[this.setup.login.response.valueSelector]),"always"!==this.setup.refreshInterval){let t=this.setup.refresh.interval||r.DEFAULT.MIN_REFRESH_INTERVALL_TIME;if("number"==typeof this.jwt.header.iat&&"number"==typeof this.jwt.header.exp){let e=this.jwt.header.exp-this.jwt.header.iat;t=e>0?e:this.jwt.header.exp}else if("number"==typeof this.jwt.header.exp){let e=this.jwt.header.exp-Date.now();t=e>0?e:this.jwt.header.exp}t=t>r.DEFAULT.MIN_REFRESH_INTERVALL_TIME?t:r.DEFAULT.MIN_REFRESH_INTERVALL_TIME,setTimeout(r.prototype.__loadToken.bind(this),t)}return this.jwt},r.prototype.appendJwt=function(t,e,n){return t.headers=t.header||{},t.headers.Authorization="Bearer "+n.rawToken,"function"==typeof e?e():void 0},r.prototype.appendJwtXHR=function(t,e,n){return t.setRequestHeader("Authorization","Bearer "+n.rawToken),"function"==typeof e?e():void 0};const i={JsonWebToken:o,JWTInterceptor:r};e.a=i},function(t,e,n){"use strict";n.r(e);n(4)},function(t,e,n){"use strict";(function(t){n(6),n(7);var e,o=n(0),r=n(2);(e=window||t||{}).de=e.de||{},e.de.titus=e.de.titus||{},e.de.titus.request=e.de.titus.request||{},e.de.titus.request.interceptor={Manager:o.a,interceptors:r.a},e.RequestInterceptManager=o.a}).call(this,n(5))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=n(0),r=n(1);if("undefined"!=typeof XMLHttpRequest){const t=XMLHttpRequest.prototype.open,e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){let e=r.a.URLSPLITTER.exec(arguments[1]);this.__interceptorRequestData={method:arguments[0],url:arguments[1],server:e[1],protocol:function(t){return void 0===t[2]||"//"==t[3]?document.location.protocol||"http:":t[3]}.call(null,e),hostname:e[4]||document.location.hostname,port:e[6],query:e[7],async:"boolean"!=typeof arguments[2]||arguments[2]},t.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){return o.a.doIntercept(this.__interceptorRequestData,this,e.bind(this,arguments))}}},function(t,e,n){"use strict";var o=n(0),r=n(1);if("function"==typeof fetch){const t=fetch;fetch=function(e,n){console.log("arguments:",arguments);let i=n||{},s=r.a.URLSPLITTER.exec(e),u={method:i.method||"GET",url:e,server:s[1],protocol:function(t){return void 0===t[2]||"//"==t[3]?document.location.protocol||"http:":t[3]}.call(null,s),hostname:s[4]||document.location.hostname,port:s[6],query:s[7],async:!0};return o.a.doIntercept(u,i,t.bind(this,e,i))}}}]);